<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>23&nbsp; Derivatives of assembled functions (optional) – MOSAIC Calculus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../Differentiation/24-optim.html" rel="next">
<link href="../Differentiation/22-cont-and-smooth.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
</head><body class="nav-sidebar floating nav-fixed"><span class="math inline" style="display: none;">
\(\newcommand{\line}{\text{line}}
\newcommand{\hump}{\text{hump}}
\newcommand{\sigmoid}{\text{sigmoid}}
\newcommand{\recip}{\text{recip}}
\newcommand{\diff}[1]{{\cal D}_#1}
\newcommand{\pnorm}{\text{pnorm}}
\newcommand{\dnorm}{\text{dnorm}}
\let\origvec\vec
\let\origmathit\mathit
\let\orighat\hat
\let\origbar\bar
\newcommand{\vec}[1]{\overset{{\rule[-1pt]{0mm}{1mm}}\rightharpoonup}{\mathbf{#1}}}
\newcommand{\bar}[1]{\overset{{\rule[-1pt]{12pt}{.5mm}}}{\mathbf{#1}}}
\newcommand{\mathit}[1]{\underset{\leftharpoondown}{\overset{{\rightharpoonup}}{\large\mathbf #1}}}
\newcommand{\hat}[1]{\widehat{\ \mathbf#1\ }}
\newcommand{\len}[1]{{\|{\mathbf #1}\|}}
\newcommand{\tvec}[1]{\overset{\uparrow}{\mathbf #1}}
\newcommand{\tmat}[1]{\overset{\leftrightarrows}{\mathbf #1}}
\newcommand{\perpendicularto}[2]{#1\!\perp\!#2}
\newcommand{\modeledby}[2]{#1\!\sim\!#2}
\newcommand{\CC}[1]{\color{#648fff}{#1}}
\newcommand{\CE}[1]{\color{#785ef0}{#1}}
\newcommand{\CA}[1]{\color{#dc267f}{#1}}
\newcommand{\CB}[1]{\color{#fe6100}{#1}}
\newcommand{\CD}[1]{\color{#ffb000}{#1}}\)
</span>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../mosaic-calc-style.css">




<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../www/Cover-1.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">MOSAIC Calculus</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/dtkaplan/MC2/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../differentiation-part.html">BLOCK II. Differentiation</a></li><li class="breadcrumb-item"><a href="../Differentiation/23-rules.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Derivatives of assembled functions (optional)</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../preliminaries-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PRELIMINARIES</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/01-quant-fun-space.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Quantity, function, space</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/02-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Notation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/03-computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Computing with R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/04-graphs-and-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Visualizing functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/05-pattern-book-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Pattern-book functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/06-describing-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Describing functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Preliminaries/07-data-functions-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data, functions, graphics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../modeling-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK I. Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/08-parameters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Parameters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/09-assembling-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Assembling functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/10-functions-with-multiple-inputs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Functions with multiple inputs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/11-fitting-features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Fitting features</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/12-low-order-polynomials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Low-order polynomials</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/13-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Operations on functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/14-magnitudes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Magnitude</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/15-dimensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Dimensions and units</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Modeling/16-modeling-scientific-method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Modeling and the scientific method</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../differentiation-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK II. Differentiation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/17-continuous-change.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Continuous change</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/18-rate-of-change.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Rate of change</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/19-evanescent-h.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Evanescent h</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/20-computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Constructing derivatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/21-concavity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Concavity and curvature</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/22-cont-and-smooth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Continuity and smoothness</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/23-rules.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Derivatives of assembled functions (optional)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/24-optim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Optimization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/25-partial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Partial change and the gradient vector</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/26-approximation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Local approximations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/27-taylor.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Polynomials</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Differentiation/Differentiation-projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Differentiation projects</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../linear-combinations-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK III. Vectors and linear combinations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-Vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-linear-combinations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Linear combinations of vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-projection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Projection &amp; residual</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-target-problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">The target problem</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Linear-combinations/B5-stat-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Statistical modeling and R<sup>2</sup></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../accumulation-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK IV. Accumulation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/33-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Change &amp; accumulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/34-visualizing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Totaling the little bits</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/35-integration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Integration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/36-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Functions as vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/37-euler.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Integrals step-by-step</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Accumulation/38-symbolic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Symbolic anti-differentiation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../dynamics-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK V. Dynamics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-diff-eq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Differential equations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Finding a “solution”</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-flow-on-line.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Flows on the line</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-flow-on-plane.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Flows on the plane</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Modeling dynamics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-equilibria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Equilibrium and transient</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-eigen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Eigenvalues, eigenvectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Dynamics/B6-second-order.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Force-balance equations</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../manifestations-part.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">BLOCK VI. Manifestations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Operations on functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-splines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Data-driven functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Optimization and constraint</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">Probability and evidence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-future-value.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Present and future value</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Manifestations/B4-mechanics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Mechanics</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-using-the-rules" id="toc-sec-using-the-rules" class="nav-link active" data-scroll-target="#sec-using-the-rules"><span class="header-section-number">23.1</span> Using the rules</a></li>
  <li><a href="#differentiating-linear-combinations" id="toc-differentiating-linear-combinations" class="nav-link" data-scroll-target="#differentiating-linear-combinations"><span class="header-section-number">23.2</span> Differentiating linear combinations</a></li>
  <li><a href="#product-rule-for-multiplied-functions" id="toc-product-rule-for-multiplied-functions" class="nav-link" data-scroll-target="#product-rule-for-multiplied-functions"><span class="header-section-number">23.3</span> Product rule for multiplied functions</a></li>
  <li><a href="#chain-rule-for-function-composition" id="toc-chain-rule-for-function-composition" class="nav-link" data-scroll-target="#chain-rule-for-function-composition"><span class="header-section-number">23.4</span> Chain rule for function composition</a></li>
  <li><a href="#sec-basic-derivs" id="toc-sec-basic-derivs" class="nav-link" data-scroll-target="#sec-basic-derivs"><span class="header-section-number">23.5</span> Derivatives of the basic modeling functions</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/dtkaplan/MC2/edit/main/Differentiation/23-rules.Rmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../differentiation-part.html">BLOCK II. Differentiation</a></li><li class="breadcrumb-item"><a href="../Differentiation/23-rules.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Derivatives of assembled functions (optional)</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-prod-comp-rules" class="quarto-section-identifier"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Derivatives of assembled functions (optional)</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- Standard colors in equations
magenta, brown, darkorange
-->
<p><a href="19-evanescent-h.html" class="quarto-xref"><span>Chapter 19</span></a> used the rules associated with evanescent <span class="math inline">\(h\)</span>, that is, <span class="math inline">\(\lim_{h\rightarrow 0}\)</span>, to confirm our claims about the derivatives of many of the pattern-book functions. We will call these rules <strong><em>h-theory</em></strong> for short. This chapter will use h-theory to find algebraic <strong><em>rules</em></strong> to calculate the derivatives of linear combinations of functions, products of functions, and composition of functions. Remarkably, we can figure out these rules without specifying which functions are being combined. So the rules can be written in terms of abstractions: <span class="math inline">\(f()\)</span>, <span class="math inline">\(g()\)</span>, and <span class="math inline">\(h()\)</span>. Later, we will apply those rules to specific functions, to show how the rules are used in practical work.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
So much math notation!
</div>
</div>
<div class="callout-body-container callout-body">
<p>As you scroll through this chapter, you will likely be struck by the large amount of mathematical notation. Many people are put off by so much notation. I want to remind you not to worry.</p>
<p>The topic in this chapter is traditional for Calculus courses. That doesn’t mean that it is important for using Calculus. It was essential back in the days before computers learned to do algebra; people had to perform the operations then. And it may give some readers a deeper appreciation of the relationship between functions and their derivatives.</p>
</div>
</div>
<section id="sec-using-the-rules" class="level2" data-number="23.1">
<h2 data-number="23.1" class="anchored" data-anchor-id="sec-using-the-rules"><span class="header-section-number">23.1</span> Using the rules</h2>
<p>When you encounter a function that you want to differentiate, you first have to examine the function to decide which rule you want to apply. In the following, we will to use the names <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span>, but in practice the functions will often be basic modeling functions, for instance <span class="math inline">\(e^{kx}\)</span> or <span class="math inline">\(\sin\left(\frac{2\pi}{P}t\right)\)</span>, etc.</p>
<p><strong><em>Step 1</em></strong>: Identify f() and g()</p>
<p>We will write the rules in terms of two function names, <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span>, which can stand for any functions whatsoever. It is rare to see the product or the composition written explicitly as <span class="math inline">\(f(x)g(x)\)</span> of <span class="math inline">\(f(g(x))\)</span>. Instead, you are given something like <span class="math inline">\(e^x \ln(x)\)</span>. The first step in differentiating the product or composition is to identify what are <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span> individually.</p>
<p>In general, <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span> might be complicated functions, themselves involving linear combinations, products, and composition. But to get started, we will practice with cases where they are simple, pattern-book functions.</p>
<p><strong><em>Step 2</em></strong>: Find f’() and g’()</p>
<p>For differentiating either products or compositions, you will need to identify both <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span> (the first step) and then compute the derivatives <span class="math inline">\(\partial_x f()\)</span> and <span class="math inline">\(\partial_x g()\)</span>. That is, you will write down four functions.</p>
<p><strong><em>Step 3</em></strong>: Apply the relevant rule</p>
<p>Recall from <a href="../Modeling/09-assembling-functions.html" class="quarto-xref"><span>Chapter 9</span></a> that will will be working with three important forms for creating new functions out of existing functions:</p>
<ol type="1">
<li>Linear combinations, e.g.&nbsp;<span class="math inline">\(a f(x) + bg(x)\)</span></li>
<li>Products of functions, e.g.&nbsp;<span class="math inline">\(f(x) g(x)\)</span></li>
<li>Compositions of functions, e.g.&nbsp;<span class="math inline">\(f\left(g(x)\right)\)</span></li>
</ol>
</section>
<section id="differentiating-linear-combinations" class="level2" data-number="23.2">
<h2 data-number="23.2" class="anchored" data-anchor-id="differentiating-linear-combinations"><span class="header-section-number">23.2</span> Differentiating linear combinations</h2>
<p><strong><em>Linear combination</em></strong> is one of the ways in which we make new functions from existing functions. As you recall, linear combination involves <strong><em>scaling</em></strong> functions and then <strong><em>adding</em></strong> the scaled functions as in <span class="math inline">\(a f(x) + b g(x)\)</span>: a linear combination of <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span>. We can easily use <span class="math inline">\(h\)</span>-theory to show what is the result of differentiating a linear combination of functions. First, let’s figure out what is <span class="math inline">\(\partial_x\, a f(x)\)</span>, Going back to writing <span class="math inline">\(\partial_x\)</span> in terms of a slope function: <span class="math display">\[\partial_x\, a\,f(x) = \frac{a\, f(x + h) - a\,f(x)}{h}\\
\ \\
= a \frac{f(x+h) - f(x)}{h} = a\, \partial_x f(x)\]</span> In other words, if we know the derivative <span class="math inline">\(\partial_x\, f(x)\)</span>, we can easily find the derivative of <span class="math inline">\(a\, f()\)</span>. Notice that even though <span class="math inline">\(h\)</span> was used in the derivation, it appears nowhere in the result <span class="math inline">\(\partial_x\, b\,f(x) = b\, \partial_x\, f(x)\)</span>. The <span class="math inline">\(h\)</span> is solvent to get the paint on the wall and evaporates once its job is done.</p>
<p>Now consider the derivative of the sum of two functions, <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span>: <span class="math display">\[\begin{eqnarray}
\partial_x\, \left(f(x) + g(x)\right) &amp; =\frac{\left(f(x + h) + g(x + h)\right) - \left(f(x) + g(x)\right)}{h} \\
\ \\
&amp;= \frac{\left(f(x+h) -f(x)\right) + \left(g(x+h) - g(x)\right)}{h}\\
\ \\
&amp;= \frac{\left(f(x+h) -f(x)\right)}{h} + \frac{\left(g(x+h) - g(x)\right)}{h}\\
\ \\
&amp;= \partial_x\, f(x) + \partial_x\, g(x)
\end{eqnarray}\]</span></p>
<p>Because of how <span class="math inline">\(\partial_x\)</span> can be “passed through” a linear combination, mathematicians say that differentiation is a <strong><em>linear operator</em></strong>. Consider this new fact about differentiation as a down payment on what will eventually become a complete theory telling us how to differentiate a <strong><em>product of two functions</em></strong> or the <strong><em>composition of two functions</em></strong>. We will lay out the <span class="math inline">\(h\)</span>-theory based algebra of this in the next two sections.</p>
<p>We can summarize the h-theory result for linear combinations this way:</p>
<blockquote class="blockquote">
<p><em>The derivative of a linear combination is the linear combination of the derivatives.</em></p>
</blockquote>
<p>That is:</p>
<p><span class="math display">\[\partial_x \left({\large\strut} \color{orange}{a} \color{black}{f(x)} + \color{orange}{b} \color{black}{g(x)}\right) = \color{orange}{a} {\color{brown}{f'(x)}} + \color{orange}{b} \color{brown}{g'(x)}\]</span> as well as</p>
<p><span class="math display">\[\partial_x \left({\large\strut} \color{orange}{a}\, \color{black}{f(x)} + \color{orange}{b}\, \color{black}{g(x)}  + \color{orange}{c}\, \color{black}{h(x)} + \cdots\right) = \color{orange}{a}\, {\color{brown}{f'(x)}} + \color{orange}{b}\, {\color{brown}{g'(x)}} + \color{orange}{c}\, {\color{brown}{h'(x)}} + \cdots\]</span></p>
<div id="tip-d-polynomials" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.1: Derivatives of polynomials are polynomials
</div>
</div>
<div class="callout-body-container callout-body">
<p>The derivative of a polynomial is a polynomial of a lower order. We can demonstrate this:</p>
<p>Consider the polynomial <span class="math display">\[h(x) = \color{orange}{a}\color{brown}{x^0}  + \color{orange}{b} \color{brown}{x^1} + \color{orange}{c} \color{brown}{x^2}\]</span> The derivative is <span class="math display">\[\partial_x h(x) = \color{orange}{a}\,\color{brown}{0}\,   + \color{orange}{b}\,\color{brown}{1}   + \color{orange}{c}\, \color{brown}{2 x} = \color{orange}{b} +  \color{brown}{2}\,\color{orange}{c}\,\color{brown}{x}\ .\]</span></p>
</div>
</div>
</section>
<section id="product-rule-for-multiplied-functions" class="level2" data-number="23.3">
<h2 data-number="23.3" class="anchored" data-anchor-id="product-rule-for-multiplied-functions"><span class="header-section-number">23.3</span> Product rule for multiplied functions</h2>
<p>The question at hand is how to compute the derivative <span class="math inline">\(\partial_x f(x) g(x)\)</span>. Of course, you can always use numerical differentiation. But let’s look at the problem from the point of view of symbolic differentiation. And since <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span> are just pronoun functions, we will assume you are starting out already knowing the derivatives <span class="math inline">\(\partial_x f(x)\)</span> and <span class="math inline">\(\partial_x g(x)\)</span>.</p>
<p>This situation arises particularly when <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span> are pattern-book functions for which you already have memorized <span class="math inline">\(\partial_x f(x)\)</span> and <span class="math inline">\(\partial_x g(x)\)</span> or are basic modeling functions whose derivatives you will memorize in Section @ref(basic-derivs).</p>
<p>The purpose of this section is to <strong>derive</strong> the formula for <span class="math inline">\(\partial_x f(x) g(x)\)</span> in terms of <span class="math inline">\(f(x)\)</span>, <span class="math inline">\(g(x)\)</span>, <span class="math inline">\(\partial_x f(x)\)</span> and <span class="math inline">\(\partial_x g(x)\)</span>. This formula is called the <strong><em>product rule</em></strong>. The point of showing a derivation of the product rule is to let you see how the logic of evanescent <span class="math inline">\(h\)</span> plays a role. In practice, everyone simply memorizes the rule, which has a beautiful, symmetric form:</p>
<p><span class="math display">\[\text{Product rule:}\ \ \ \ \partial_x \left(\strut f(x)g(x)\right) = \left(\strut \partial_x f(x)\right)\, g(x) + f(x)\, \left(\strut\partial_x g(x)\right)\]</span> and is even prettier in Lagrange notation (where <span class="math inline">\(\partial_x f(x)\)</span> is written <span class="math inline">\(f'\)</span>): <span class="math display">\[ \left(\strut f g\right)' = f' g + g' f\]</span></p>
<p>As with all derivatives, the product rule is based on slope function (<a href="18-rate-of-change.html#sec-slope-function" class="quarto-xref"><span>Section 18.3</span></a>). Symbolic derivatives also invoke evanescent <span class="math inline">\(h\)</span> (<a href="19-evanescent-h.html" class="quarto-xref"><span>Chapter 19</span></a>). <span class="math display">\[F'(x) \equiv \lim_{h\rightarrow 0} \frac{F(x+h) - F(x)}{h}\]</span></p>
<p>We also need two other statements about <span class="math inline">\(h\)</span> and functions:</p>
<ol type="1">
<li><p>The derivative <span class="math inline">\(F'(x)\)</span> is the slope of of <span class="math inline">\(F()\)</span> at input <span class="math inline">\(x\)</span>. Taking a step of size <span class="math inline">\(h\)</span> from <span class="math inline">\(x\)</span> will induce a change of output of <span class="math inline">\(h F'(x)\)</span>, so <span class="math display">\[F(x+h) = F(x) + h F'(x)\ .\]</span></p></li>
<li><p>Any result of the form <span class="math inline">\(h F(x)\)</span>, where <span class="math inline">\(F(x)\)</span> is finite, gives 0. More precisely, <span class="math inline">\(\lim_{h\rightarrow 0} h F(x) = 0\)</span>.</p></li>
</ol>
<p>As before, we will put the standard <span class="math inline">\(\lim_{h\rightarrow 0}\)</span> disclaimer against dividing by <span class="math inline">\(h\)</span> until there are no such divisions at all, at which point we can safely use the equality <span class="math inline">\(h = 0\)</span>.</p>
<p>Suppose the function <span class="math inline">\(F(x) \equiv f(x) g(x)\)</span>, a product of the two functions <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span>.</p>
<p><span class="math display">\[F'(x) = \partial_x \left(\strut f(x) g(x) \right) \equiv \lim_{h\rightarrow 0}\frac{f(x+h) g(x+h) - f(x) g(x)}{h}\]</span> We will replace <span class="math inline">\(g(x + h)\)</span> with its equivalent <span class="math inline">\(g(x) + h g'(x)\)</span> giving</p>
<p><span class="math display">\[= \lim_{h\rightarrow 0} \frac{f(x+h) \left(\strut g(x) + h g'(x) \right) - f(x) g(x)}{h} \]</span> <span class="math inline">\(g(x)\)</span> appears in both terms in the numerator, once multiplied by <span class="math inline">\(f(x+h)\)</span> and once by <span class="math inline">\(f(x)\)</span>. Collecting those terms give:</p>
<p><span class="math display">\[=\lim_{h\rightarrow 0}\frac{\left(\strut f(x+ h) - f(x)\right)  g(x) + \left(\strut f(x+h) h\, g'(x)\right)}{h}\]</span> This has two bracketed terms added together over a common denominator. Let’s split them into separate terms:</p>
<p><span class="math display">\[=\lim_{h\rightarrow 0}\underbrace{\left(\strut \frac{f(x+h) - f(x)}{h}\right)}_{f'(x)} g(x) + \lim_{h\rightarrow 0}\frac{\left(\strut f(x) + h f'(x)\right)h\,g'(x)}{h}\]</span></p>
<p>Notice that the second term has an <span class="math inline">\(h\)</span> both in the numerator and the denominator. <span class="math inline">\(h\)</span>-theory tells us that <span class="math inline">\(\lim_{h\rightarrow 0} h/h = 1\)</span>.</p>
<p>The first term is <span class="math inline">\(g(x)\)</span> multiplied by the familiar form for the derivative of <span class="math inline">\(f(x)\)</span> <span class="math display">\[= f'(x) g(x) + \lim_{h\rightarrow 0}\frac{f(x) h g'(x)}{h} + \lim_{h\rightarrow 0}\frac{h f'(x) h g'(x)}{h}\]</span> In each of the last two terms there is an <span class="math inline">\(h/h\)</span> involved. This is safely set to 1, since the <span class="math inline">\(\lim_{h\rightarrow 0}\)</span> implies that <span class="math inline">\(h\)</span> will not be exactly zero. There remain no divisions by <span class="math inline">\(h\)</span> so we can drop the <span class="math inline">\(\lim_{h\rightarrow 0}\)</span> in favor of <span class="math inline">\(h=0\)</span>: <span class="math display">\[= f'(x) g(x) + f(x) g'(x) + \cancel{h f'(x) g'(x)}\]</span></p>
<p><span class="math display">\[=f'(x) g(x) + g'(x) f(x)\]</span></p>
<p>The last step relies on statement (2) above.</p>
<p>Some people find it easier to read the rule in Lagrange shorthand, where <span class="math inline">\(f\)</span> and <span class="math inline">\(g\)</span> stand for <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span> respectivly, and <span class="math inline">\(f'\)</span> (“f-prime”) and <span class="math inline">\(g'\)</span> (“g-prime”) stand for <span class="math inline">\(\partial f()\)</span> and <span class="math inline">\(\partial g()\)</span>.</p>
<p><span class="math display">\[\text{Lagrange shorthand:}\ \   \partial(\color{magenta}f \times \color{brown}g) = (\color{magenta}f \times \color{brown}g)' = \color{magenta}{f'}\color{brown}g + \color{brown}{g'}\color{magenta}f\]</span></p>
<div id="tip-mult-3-funs" class="callout callout-style-default callout-tip callout-titled" style="display: none;">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.2
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<a href="#tip-mult-3-funs" class="quarto-xref">Tip&nbsp;<span>23.2</span></a> How about multiplying three functions?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Occasionally, mathematics gives us a situation where being more general produces simplicity.</p>
<p>In the case of function products, the generalization is from products of two functions <span class="math inline">\(f(x)\cdot g(x)\)</span> to products of more than two functions, e.g.&nbsp;<span class="math inline">\(u(x) \cdot v(x) \cdot w(x)\)</span>.</p>
<p>The chain rule here takes a form that makes the overall structure much clearer:</p>
<p><span class="math display">\[\begin{eqnarray}
\partial_x \left(\strut u(x) \cdot v(x) \cdot w(x)\right) = \ \ \ \ \ \ \ \ \ \ \ \ \\
\color{blue}{\partial_x u(x)} \cdot v(x) \cdot w(x)\ + \\
u(x) \cdot \color{blue}{\partial_x v(x)} \cdot w(x)\ + \\
u(x) \cdot v(x) \cdot \color{blue}{\partial_x w(x)}\ \  \ \
\end{eqnarray}\]</span>\end{eqnarray}</p>
<p>In the Lagrange shorthand, the pattern is even more evident: <span class="math display">\[\left( u\cdot v\cdot w\right)' = \color{blue}{u'}\cdot v\cdot w\ +\ u\cdot \color{blue}{v'}\cdot w\ +\ u\cdot v\cdot \color{blue}{w}'\]</span></p>
<p>As an example, consider the derivative of <span class="math inline">\(x^3\)</span> with respect to <span class="math inline">\(x\)</span>. Obviously, <span class="math inline">\(x^3 \equiv x \cdot  x \cdot  x\)</span>, a product of three simple functions:</p>
<span class="math display">\[\begin{array}{ccc}\partial_x x^3 = \partial_x [x \cdot x \cdot x]\ \ \ &amp; = \\
&amp; [\partial_x x] &amp;x&amp;x&amp; +\\
&amp; x &amp; [\partial_x x] &amp; x&amp;  +\\
&amp;x &amp; x &amp;[\partial_x x]
\end{array}\]</span>
<p>Since <span class="math inline">\(\partial_x x = 1\)</span> this collapses to <span class="math inline">\(\partial_x x^3 = 3 x^2\)</span>.</p>
</div>
</div>
</section>
<section id="chain-rule-for-function-composition" class="level2" data-number="23.4">
<h2 data-number="23.4" class="anchored" data-anchor-id="chain-rule-for-function-composition"><span class="header-section-number">23.4</span> Chain rule for function composition</h2>
<p>A function composition, as described in <a href="../Modeling/09-assembling-functions.html#sec-function-composition" class="quarto-xref"><span>Section 9.2</span></a>, involves inserting the output of one function (the “interior function”) as the input of the other function (the “exterior function”). As we so often do, we will be using pronouns a lot. A list might help keep things straight:</p>
<ul>
<li>There are two functions involved in a composition. Generically, we call them <span class="math inline">\(f(y)\)</span> and <span class="math inline">\(g(x)\)</span>. In the composition <span class="math inline">\(f(g(x))\)</span>, the <strong><em>exterior function</em></strong> is <span class="math inline">\(f()\)</span> and the <strong><em>interior function</em></strong> is <span class="math inline">\(g()\)</span>.</li>
<li>Each of the two functions <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span> has an input. In our examples, we use <span class="math inline">\(y\)</span> to stand for the input to the exterior function and <span class="math inline">\(x\)</span> for the input to the interior function.</li>
<li>As with all rules for differentiation, we will need to compute the derivatives of the functions involved, each with respect to its own input. So these will be <span class="math inline">\(\partial_y f(y)\)</span> and <span class="math inline">\(\partial_x g(x)\)</span>.</li>
</ul>
<p>A reason to use different pronouns for the inputs to <span class="math inline">\(f()\)</span> and <span class="math inline">\(g()\)</span> is to remind us that the output <span class="math inline">\(g(x)\)</span> is in general not the same kind of quantity as the input <span class="math inline">\(x\)</span>. In a function composition, the <span class="math inline">\(f()\)</span> function will take the output <span class="math inline">\(g(x)\)</span> as input. But since <span class="math inline">\(g(x)\)</span> is not necessarily the same kind of thing as <span class="math inline">\(x\)</span>, why would we want to use the same name for the input to <span class="math inline">\(f()\)</span> as we use for the input to <span class="math inline">\(g()\)</span>.</p>
<p>With this distinction between the names of the inputs, we can be even more explicit about the composition, writing <span class="math inline">\(f(y=g(x))\)</span> instead of <span class="math inline">\(f(g(x))\)</span>. Had we used the pronound <span class="math inline">\(x\)</span> for the input to <span class="math inline">\(f()\)</span> but our explicit statement, although technically correct, would be confusing: <span class="math inline">\(f(x = g(x))\)</span>!</p>
<p>With all these pronouns in mind, here is the <strong><em>chain rule</em></strong> for the derivative <span class="math inline">\(\partial_x f(g(x))\)</span>:</p>
<p><span class="math display">\[\partial_x \left({\large\strut} f\left(\strut{\color{magenta}{g(x)}}\right)\right) =\color{brown}{\partial_y f({\color{magenta}{g(x)}})} \times \color{brown}{\partial_x g(x)}\]</span></p>
<p>Or, using the Lagrange prime notation, where <span class="math inline">\('\)</span> stands for the derivative of a function with respect to its input, we have <span class="math display">\[\text{Lagrange shorthand:}\ \   \left(\color{black}f({\color{magenta}g)}\right)' = \color{brown}{f'} (\color{magenta}{g}) \times \color{blue}{g}'\]</span></p>
<div id="tip-dlog" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.3: Calculating <span class="math inline">\(\partial_x \ln(x)\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>The chain rule can be used in a clever way to find a formula for <span class="math inline">\(\partial_x \ln(x)\)</span>.</p>
<p>We’ve already seen that the logarithm is the inverse function to the exponential, and <em>vice versa</em>. That is: <span class="math display">\[e^{\ln(y)} = y \ \ \ \text{and}\ \ \ \ln(e^y) = x\]</span> Since <span class="math inline">\(\ln(e^y)\)</span> is the same function as <span class="math inline">\(y\)</span>, the derivative <span class="math inline">\(\partial_y \ln(e^y) = \partial_y y = 1\)</span>.</p>
<p>Let’s differentiate the second form using the chain rule: <span class="math display">\[\partial_y \ln(e^y) = \left(\partial_y \ln\right)(e^y)\, e^x = 1\]</span> giving <span class="math display">\[\left(\partial_y \ln\right](e^y) = \frac{1}{e^y} = \recip(e^y)\]</span> Whatever the function <span class="math inline">\(\partial_x \ln()\)</span> might be, it takes its input and produces as output the reciprocal of that input. In other words: <span class="math display">\[\partial_x \ln(x) = \frac{1}{x}\ .\]</span></p>
</div>
</div>
<div id="thm-linear-log-axes" class="theorem" style="display: none;">
<p><span class="theorem-title"><strong>Application area 23.1</strong></span> &nbsp;</p>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<a href="#thm-linear-log-axes" class="quarto-xref">Application area&nbsp;<span>23.1</span></a> Logarithms and Rates per time
</div>
</div>
<div class="callout-body-container callout-body">
<p>In news and policy discussions, you will often hear about “inflation rate” or “birth rate” or “interest rate” or “investment rate of return.” In each case, there is a function of time combined with a derivative of that function: with the general form <span class="math display">\[\frac{\partial_t g(t)}{g(t)}\ .\]</span> In other words, the “rate” is the size of the change with time (<span class="math inline">\(\partial_t f(t)\)</span>) divided by the size of the whole (<span class="math inline">\(f(t)\)</span> at that time.</p>
<ul>
<li>Inflation rate: The function <span class="math inline">\(f(t)\)</span> is cost_of_living(<span class="math inline">\(t\)</span>).</li>
<li>Population growth rate: The function is population(<span class="math inline">\(t\)</span>).</li>
<li>Interest rate: The function is account_balance(<span class="math inline">\(t\)</span>).</li>
<li>Investment returns: The function is net_worth(<span class="math inline">\(t\)</span>).</li>
</ul>
<p>In all these cases, The “rate” is not merely “per time” as would be the case for <span class="math inline">\(\partial_t g(t)\)</span>. Instead the rate is “per unit of the <em>whole</em> per time.” For population growth rate, the “whole” is the population. Such rates involving people are often stated with the phrase is “<strong><em>per capita</em></strong> per year.” (The Latin “per capita” translates to “by head.” Its modern sense is “per unit of population.” Of course, the “unit of population” is a person.)</p>
<p>Notice the two uses of “<strong>per</strong>” in the phrase: “births <strong>per</strong> capita <strong>per</strong> year.” A proportional rate is two rates in one. Births per capita is a proportion of the population. Births per year is an average rate with respect to time. But “births <strong>per</strong> capita <strong>per</strong> year” is a rate in the proportion with respect to time.</p>
<p>The rate word “<strong>per</strong>” also appears as part of “<strong>percent</strong>,” which literally means “per hundred.” A “percentage change” is the amount of change divided by the base amount. Confusingly, perhaps, “percentage change” is often truncated to the shorter “percent.” This is the case with inflation rates, interest rates, and rates of return on investment. The interest rate on a credit-card debt is stated as a proportion of the current debt; all that is packed into the word “percent.” The interest rate itself is the “proportion of the current debt <strong>per</strong> year”: two rates in one.</p>
<p>Similarly for an inflation rate. “Inflation” is stated as the change in prices divided by the current price: a proportional change. “Inflation rate” is the proportional change <strong>per</strong> unit of time, where the “whole” is current prices and the rate is <em>change</em> in current prices per year divided by current prices.</p>
<p>Thanks to the chain rule, there is a shortcut way of writing proportional rates per time. Exactly equivalent to the ratio <span class="math inline">\(\frac{\partial_t f(t)}{f(t)}\)</span> is <span class="math display">\[\partial_t \ln(f(t))\ .\]</span></p>
<p>Derivatives of logarithms appear often in fields such as economics or finance, where it is common to consider the logarithm of the economic quantity to render changes as percent of the whole.</p>
<p>For instance, consider <a href="#fig-italy-us-covid" class="quarto-xref">Figure&nbsp;<span>23.1</span></a> which shows the cumulative number of COVID during a period in 2020, early in the pandemic.</p>
<div id="fig-italy-us-covid" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-italy-us-covid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="www/NYT-italy-us-corona.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-italy-us-covid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;23.1: Growth in the number of Coronavirus cases in Italy and the US early in the pandemic. <a href="https://www.nytimes.com/2020/03/20/health/coronavirus-data-logarithm-chart.html">Source</a> Note that linear axes are used in the left graph and semi-log axes in the right graph.
</figcaption>
</figure>
</div>
<p>The two panels in <a href="#fig-italy-us-covid" class="quarto-xref">Figure&nbsp;<span>23.1</span></a> show the same data about growing numbers of coronavirus cases, the left graph on linear axes, the right on the now-familiar semi-log axes.</p>
<p>Most people are excellent at comparing slopes, even if they find it difficult or tedious to quantify a slope with a number and units. For instance, a glance suffices to show that in the left graph, well through mid-March the red curve (Italy) is steeper on any given date than the blue curve (US). Correspondingly, the number of people with coronavirus was growing faster (per day) in Italy.</p>
<p>The right graph tells a different story: up until about March 1, the Italian cases were increasing faster than the US cases. Afterwards, the US sees a larger growth rate than Italy until, around March 19, the US growth rate is substantially larger than the Italy growth rate.</p>
<p>The previous two paragraphs and their corresponding graphs seem to contradict one another. But they are both accurate, truthful depictions of the same events. What’s different between the two graphs is that the left shows one kind of rate and the right shows another kind of rate. In the left, the slope is new-cases-per-day, the output of the derivative function</p>
<p><strong>left graph</strong>: <span class="math inline">\(\ \ \ \  \partial\_t\, \text{daily\_new\_cases}(t)\)</span>.</p>
<p>On the right, the slope is the <strong><em>proportional increase</em></strong> in cases per day, that is,</p>
<p><strong>right graph</strong>: <span class="math inline">\(\ \ \ \ \frac{\partial_t\, \text{daily\_new\_cases}(t)}{\text{daily\_new\_cases}(t)}\)</span>.</p>
<p>From the chain rule, we know that</p>
<p><span class="math display">\[\partial_t \left(\strut\ln\left(\strut(f(t)\right)\right) = \frac{\partial_t f(t)}{f(t)}\ .\]</span></p>
<p>Since the right graph is on semi-log axes, the slope we perceive visually is <span class="math inline">\(\partial_t \left(\strut\ln(f(t))\right)\)</span>. That is an obscure-looking bunch of notation until the chain rule reveals it to be the rate of <em>change in the number</em> of covid cases at time <span class="math inline">\(t\)</span> divided by the number of cases at time <span class="math inline">\(t\)</span>.</p>
</div>
</div>
<div id="tip-derive-chain-rule" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.4: Proof for the chain rule (optional)
</div>
</div>
<div class="callout-body-container callout-body">
<p>The derivation of the chain rule relies on two closely related statements which are expressions of the idea that near any value <span class="math inline">\(x\)</span> a function can be expressed as a linear approximation with the slope equal to the derivative of the function :</p>
<ol type="1">
<li><span class="math inline">\(g(x + h) = g(x) + h g'(x)\)</span></li>
<li><span class="math inline">\(f(y + \epsilon) = f(y) + \epsilon f'(y)\)</span>, which is the same thing as (1) but uses <span class="math inline">\(y\)</span> as the argument name and <span class="math inline">\(\epsilon\)</span> to stand for the small quantity we usually write with an <span class="math inline">\(h\)</span>.</li>
</ol>
<p>We will now look at <span class="math inline">\(\partial_x f\left({\large\strut} g(x)\right)\)</span> by writing down the fundamental definition of the derivative. This, of course, involves the disclaimer <span class="math inline">\(\lim_{h\rightarrow 0}\)</span> until we are sure that there is no division by <span class="math inline">\(h\)</span> involved.</p>
<p><span class="math display">\[\partial_x \left({\large\strut} f\left(\strut\strut g(x)\right)\right)  \equiv \lim_{h\rightarrow 0}\frac{\color{magenta}{f(g(x+h))} - f(g(x))}{h}\]</span></p>
<p>Let’s examine closely the expression <span class="math inline">\(\color{magenta}{f\left(\strut g(x+h)\right)}\)</span>. Applying rule (1) above turns it into <span class="math display">\[\lim_{h\rightarrow 0} f\left(\strut g(x) + \color{blue}{h g'(x)}\right)\]</span> Now apply rule (2) but substituting in <span class="math inline">\(g(x)\)</span> for <span class="math inline">\(y\)</span> and <span class="math inline">\(\color{blue}{h g'(x)}\)</span> for <span class="math inline">\(\epsilon\)</span>, giving<br>
<span class="math display">\[\lim_{h\rightarrow 0} \color{magenta}{f\left(\strut g(x+h)\right)} = \lim_{h\rightarrow 0} \color{brown}{\left({\large\strut} f\left(g(x)\right) + \color{blue}{h g'(x)}f'\left(g(x)\right)\right)}\]</span> We will substitute the <span class="math inline">\(\color{blue}{blue}\)</span> and <span class="math inline">\(\color{brown}{brown}\)</span> expression for the <span class="math inline">\(\color{magenta}{magenta}\)</span> expression in <span class="math display">\[\partial_x f\left(\strut g(x)\right)  \equiv \lim_{h\rightarrow 0}\frac{\color{magenta}{f(g(x+h))} - f(g(x))}{h}\]</span> giving <span class="math display">\[\partial_x f\left(\strut g(x)\right)  \equiv \lim_{h\rightarrow 0}\frac{\color{brown}{f\left(g(x)\right) + \color{blue}{h g'(x)}f'\left(g(x)\right)} - f\left(g(x)\right)}{h}\]</span> In the denominator, <span class="math inline">\(f\left(g(x)\right)\)</span> appears twice and cancels itself out. That leaves a single term with an <span class="math inline">\(h\)</span> in the numerator and an <span class="math inline">\(h\)</span> in the denominator. Those <span class="math inline">\(h\)</span>’s cancel out, at the same time obviating the need for <span class="math inline">\(\lim_{h\rightarrow 0}\)</span> and leaving us with the chain rule: <span class="math display">\[\partial_x f\left(\strut g(x)\right)  \equiv \lim_{h\rightarrow 0}\frac{\color{brown}{ \color{blue}{h g'(x)} f'\left(g(x)\right)}}{h} = f'\left(g(x)\right)\ g'(x)\]</span></p>
</div>
</div>
<div id="tip-d-of-log" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.5: Derivative of the logarithmic and power-law functions
</div>
</div>
<div class="callout-body-container callout-body">
<p>Knowing that <span class="math inline">\(\partial_x \ln(x) = 1/x\)</span> and the chain rule, we are in a position to demonstrate the <strong><em>power-law rule</em></strong> <span class="math inline">\(\partial_x x^p = p\, x^{p-1}\)</span>. The key is to use the identity <span class="math inline">\(e^{\ln(x)} = x\)</span>.</p>
<p><span class="math display">\[\partial_x x^p = \partial_x \left(e^{\ln(x)}\right)^p\]</span> The rules of exponents allow us to recognize <span class="math display">\[\left(e^{\ln(x)}\right)^p = e^{p \ln(x)}\]</span> Thus, <span class="math inline">\(x^p\)</span> can be seen as a composition of the exponential function onto the logarithm function.</p>
<p>Applying the chain rule to this composition gives <span class="math display">\[\partial_x e^{p \ln(x)} = e^{p\ln(x)}\partial_x [p \ln(x)] =
e^{p\ln(x)} \frac{p}{x}\ .\]</span> Of course, we already know that <span class="math inline">\(e^{p \ln(x)} = x^p\)</span>, so we have <span class="math display">\[\partial_x x^p = x^p \frac{p}{x} = p x^{p-1}\ .\]</span></p>
</div>
</div>
</section>
<section id="sec-basic-derivs" class="level2" data-number="23.5">
<h2 data-number="23.5" class="anchored" data-anchor-id="sec-basic-derivs"><span class="header-section-number">23.5</span> Derivatives of the basic modeling functions</h2>
<p>The basic modeling functions are the same as the pattern-book functions, but with bare <span class="math inline">\(x\)</span> replaced by <span class="math inline">\(\line(x)\)</span>. In other words, each of the basic modeling functions is a <strong><em>composition</em></strong> of the corresponding pattern-book function with <span class="math inline">\(\line(x)\)</span>. Consequently, the derivatives of the basic modeling functions can be found using the chain rule.</p>
<p>Suppose <span class="math inline">\(f()\)</span> is one of our pattern-book functions. Then <span class="math display">\[\partial_x f(\color{magenta}{ax + b}) = \color{blue}{a} \color{brown}{f'(\color{magenta}{ax + b})}\]</span> where <span class="math inline">\(\color{blue}{a}\)</span> is the derivative with respect to <span class="math inline">\(x\)</span> of <span class="math inline">\(\color{magenta}{ax + b}\)</span>.</p>
<p>Here are the steps for differentiating a basic modeling function <span class="math inline">\(\color{brown}{f}(\color{magenta}{a x + b})\)</span> where <span class="math inline">\(f()\)</span> is one of the pattern-book functions:</p>
<ul>
<li>Step 1: Identify the particular pattern-book function <span class="math inline">\(\color{brown}{f}()\)</span> and write down its derivative <span class="math inline">\(\color{brown}{f'}\)</span>. For example, if <span class="math inline">\(f()\)</span> is <span class="math inline">\(\sin()\)</span>, then <span class="math inline">\(f'()\)</span> is <span class="math inline">\(\cos()\)</span>.</li>
<li>Step 2: Find the derivative of the linear interior function. If the function is <span class="math inline">\(\color{magenta}{ax + b}\)</span>, then the derivative is <span class="math inline">\(\color{blue}{a}\)</span>. If the interior function is <span class="math inline">\(\color{magenta}{\frac{2\pi}{P}(t-t_0)}\)</span>, the derivative is <span class="math inline">\(\color{blue}{\frac{2 \pi}{P}}\)</span>.</li>
<li>Step 3: Write down the original function <span class="math inline">\({f(\color{magenta}{a x + b})}\)</span> but replace <span class="math inline">\(f()\)</span> with <span class="math inline">\(\large \color{brown}{f'()}\)</span> and pre-multiply by the derivative of the interior function. For instance, <span class="math display">\[\partial_x f(\color{magenta}{ax + b}) = {\large \color{magenta}{a}}{\large f'}(\color{magenta}{ax + b})\]</span> Another example: <span class="math display">\[\partial_t \color{brown}{\sin}\left(\color{magenta}{\frac{2 \pi}{P}(t-t_0)} \right) = {\color{magenta}{\frac{2 \pi}{P}}}\color{brown}{\cos}\left(\color{magenta}{\frac{2 \pi}{P}(t-t_0) }\right) \]</span></li>
</ul>
<p>The rule for the derivative of any basic modeling function <span class="math inline">\(f(\line(x))\)</span> is <span class="math display">\[\partial_x f(\line(x)) = \partial_x \line(x) \times \partial_x f\left(\strut\line(x)\right)\]</span></p>
<p>To illustrate, we’ll write the exterior function in black, and its derivative in brown. <span class="math inline">\(\color{magenta}{\line()}\)</span> The interior function is drawn in <span style="color: magenta;">magenta</span> and its derivative in <span style="color: blue;">blue</span>. For example:</p>
<p><span class="math display">\[f(\color{magenta}{g(x)})' = \color{brown}{f'}(\color{blue}{g(x)})\ \color{magenta}{g'(x)}\]</span></p>
<div id="tip-line-in-basic-modeling-functions" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip&nbsp;23.6
</div>
</div>
<div class="callout-body-container callout-body">
<p>By convention, there are different ways of writing <span class="math inline">\(\color{magenta}{\line()}\)</span> when constructing the different basic modeling functions from the corresponding pattern-book functions. Regretably, this imposes extra cognitive load on the student. The point here is that all of the basic modeling functions are a patter-book function composed with a <span class="math inline">\(\color{magenta}{\line()}\)</span> function, regardless of the form that <span class="math inline">\(\color{magenta}{\line()}\)</span> is turned into when obeying convention. In <a href="#tbl-line-in-basic-modeling-functions" class="quarto-xref">Table&nbsp;<span>23.1</span></a> we have used <span style="color: magenta;">magenta</span> to help you see the different forms.</p>
<div id="tbl-line-in-basic-modeling-functions" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-line-in-basic-modeling-functions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;23.1: Various conventions for writing <span class="math inline">\(\color{magenta}{\line()}\)</span> in the basic modeling functions.
</figcaption>
<div aria-describedby="tbl-line-in-basic-modeling-functions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 38%">
<col style="width: 22%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Pattern-book function</th>
<th style="text-align: center;"><span class="math inline">\(\longrightarrow\)</span></th>
<th style="text-align: left;">Basic modeling function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><span class="math inline">\(\sin(x)\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\sin\left(\strut {\color{magenta}{\frac{2 \pi}{P} \left( x-x_0 \right)}}\right)\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;"><span class="math inline">\(\exp(x)\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{magenta}{A}\color{black}{\exp\left(\strut{\color{magenta}{k x}}\right)}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: right;"><span class="math inline">\(x^2\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{\black}{\left(\strut {\color{magenta}{mx + b}}\right)^2}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;"><span class="math inline">\(1/x\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{black}{1/\left(\strut {\color{magenta}{mx+ b}}\right)}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: right;"><span class="math inline">\(\ln(x)\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{black}{\ln\left(\strut {\color{magenta}{a x + b}}\right)}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;"><span class="math inline">\(\dnorm(x)\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{black}{\dnorm(\strut {\color{magenta}{\frac{x - \text{mean}}{\text{sd}}}})}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: right;"><span class="math inline">\(\pnorm(x)\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: left;"><span class="math inline">\(\color{black}{\pnorm(\strut {\color{magenta}{\frac{x - \text{mean}}{\text{sd}}}})}\)</span></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
<p>The consequences of the various forms of <span class="math inline">\(\color{magenta}{\line()}\)</span> are a possibly confusing diversity of forms for derivatives of the basic modeling functions. We ill continue with the color convention of writing <span class="math inline">\(f()\)</span> in black, <span class="math inline">\(\color{brown}{f'()}\)</span> in brown, and <span class="math inline">\(\partial_x \color{magenta}{\line()}\)</span> in <span style="color: blue;">blue</span>.</p>
<ul>
<li><span class="math inline">\(\partial_x e^{\color{magenta}{kx}} = {\color{blue}{k}}\, \color{brown}{e^{\color{magenta}{kx}}}\)</span></li>
<li><span class="math inline">\(\partial_x \sin(\color{magenta}{\frac{2\pi}{P} (x-x_0)}) = \color{blue}{\frac{2\pi}{P}}  \color{brown}{\cos\left(\strut{\color{magenta}{\frac{2\pi}{P}  (x-x_0)}}\right)}\)</span></li>
<li><span class="math inline">\(\partial_x (\color{magenta}{mx + b})^2 = \color{brown}{2}\color{blue}{m}\color{brown}{\left(\strut{\color{magenta}{m x + b}}\right)}\)</span>.</li>
<li><span class="math inline">\(\partial_x \text{reciprocal}({\color{magenta}{mx + b}}) = \partial_x \frac{1}{{\color{magenta}{mx + b}}} =  \color{brown}{\frac{\color{blue}{m}}{\left(\strut{\color{magenta}{mx+b}}\right)^2}}\)</span></li>
<li><span class="math inline">\(\partial_x \ln(a x + b) = \color{brown}{{\frac{\color{magenta}{\color{blue}{a}}}{{\color{magenta}{ax+b}}}}}\)</span></li>
<li><span class="math inline">\(\partial_x \pnorm(\color{magenta}{\frac{x-\text{mean}}{\text{sd}}}) =\color{blue}{\frac{1}{\text{sd}}}\color{brown}{\dnorm\left(\strut{\color{magenta}{\frac{x-\text{mean}}{\text{sd}}}}\right)}\)</span>.</li>
<li><span class="math inline">\(\partial_x \dnorm\left(\color{magenta}{\frac{x-\text{mean}}{\text{sd}}}\right)=\color{brown}{-(x - \text{mean})}\color{blue}{\frac{1}{\text{sd}}}\color{brown}{\dnorm\left(\strut{\color{magenta}{\frac{x-\text{mean}}{\text{sd}}}}\right)}\)</span></li>
</ul>
<p>You will be using the derivatives of the basic modeling functions so often, that you should practice and practice until you can write the derivative at a glance.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dtkaplan\.github\.io\/MC2\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../Differentiation/22-cont-and-smooth.html" class="pagination-link" aria-label="Continuity and smoothness">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Continuity and smoothness</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../Differentiation/24-optim.html" class="pagination-link" aria-label="Optimization">
        <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Optimization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/dtkaplan/MC2/edit/main/Differentiation/23-rules.Rmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>